# Children_foraging_returns
## Abstract
Childhood is a period of life unique to humans. Childhood may have evolved through the need to acquire knowledge and subsistence skills. In an attempt to evaluate the importance of learning for the evolution of childhood, previous research examined the increase with age of returns to foraging across various resources. Any increase could be due to increases in knowledge or other factors such as body size and strength. Here, we first estimate age-specific foraging returns for two different resources. We then model the relative importance for foraging of ecological knowledge, grip strength and height in a population of part-time children foragers on the island of Pemba, Tanzania. We use anthropometric measures, such as height and strength, and estimates of ecological knowledge for more than 250 and 90 individuals respectively, in association to behavioral observations for 63 individuals across 372 foraging trips. We find slower increases in foraging returns with age for trap hunting than for shellfish collection. We do not detect any effect of individual knowledge on foraging returns, potentially because relevant information can be shared within foraging parties. We also find positive effect of individuals' height on shellfish collection. 
This is the first study providing accurate estimates of individual traits' contribution to foraging performance, which is important to evaluate evolutionary hypotheses for the emergence of childhood. 

## Required software

The code was written in R 4.2.2. Statistical models are fit using the Stan MCMC engine via the rstan package (2.21.0), which requires a C++ compiler. Installation instructions are available at https://github.com/stan-dev/rstan/wiki/RStan-Getting-Started. The rethinking package (2.21) is required to process fitted model outputs - installation instructions at http://xcelab.net/rm/software/.


## How to run

Set the working directory to this folder. Run the makefile (e.g. in the R console, type `source("make_file.R")` ). All the required packages are listed in the makefile. 

## Repo structure
- makefile.R runs all the code below and compiles figures and measures for the text.
- 1_simulation/ contains a simulation script to test the models, plus a full script that helped develop the current model parameterization and generates some supplementary figures
- 2_data_preparation/ contains anonymized data, the script used to produce them from raw data and a script to use them to create data lists to feed stan models
- 3_analysis/ contains the script that runs the models and saves the model fit
- 4_outcomes/ contains scripts to generate plots for the main text (1_plots.R), to generate measures reported in the text (2_generated_data.R), the file that this generates, and to generate figures for the supplementary materials (3_supp_info_plots.R). When compiling the project, the fitted models are saved in a model_fit/ folder.
- models/ contains all models
- plots/ is generated by the code to store the figures for both main and supplementary text

## Data
Data are provided in `2_data_preparation\processed_data.RData`, a list that contains multiple dataframes. Several columns are present in more than one data frame.

Column|Description
---------|-------------
anonymeID|anonymized id for individuals in the sample. Consistent across all data frames
success|whether a shellfishing trip yielded any return (always 1 - in shells)/ how many times a trap captured anything (in traps)
returns|weight (grams) of unprocessed shellfish collected in one trip (in shells)/total weight (grams) of all preys captured by a certain trap (in traps)
length_min|duration of shellfish collection trip, excluding travelling and processing time (in shells)
tide_height_m|minimum height of tide during which shellfish collecting trip was carried out (recorded daily from https://www.tideschart.com/Tanzania/Pemba-North/Micheweni/Konde/, in shells)
tide_avg_depth|average height of tide during trip, calculated approximating tidal bulge as an inverted gaussian kernel (in shells)
n_item_types|n of different types of shells collected by forager during trip (in shells)
sex|sex of individuals in sample (in shell_ppl, trap_ppl)
height|height of individuals in sample (centimeters, in shell_ppl, trap_ppl)
wheight|wheight of individuals in sample (kilograms, in shell_ppl, trap_ppl)
grip|grip strength of individuals in sample (kilograms, in shell_ppl, trap_ppl)
knowledge|n of items listed by individuals in sample in a freelisting task (prompt: "list all living organisms you can think of", in shell_ppl, trap_ppl)
data|relevant source of data (either from foraging trips, anthropometric measures, knowledge interviews, informs the statistical model in treating missing data. In shell_ppl, trap_ppl)
exposure|days from construction to dismantling/last observation of trap (in traps)
trap_ID|identificative code for individual traps (in traps)

### Additional data:
Within the main data list are contained two matrixes which report the results of freelist tasks (each row is an individual, each column a possible item in the list. The matrix reports 1 in cell $i,j$ if individual $i$ named item $j$ during their freelist, task, otherwise it reports 0).

A `tide_data.csv` file reports some additional measure concerning shellfish collection, relevant to further analyses of behavior in relation to tides. 


